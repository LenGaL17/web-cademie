$(document).ready( () => {

    let $img = $('#menuTrigger');
    let $menu = $('.menu');
    let state = 0;

    $img.on('click', () => {
        if (window.screen.width < 550){
            if(!state) {
                $img.attr('src', './style/index/close.svg') ;
                $menu.animate({width:'toggle'},500);
                $menu.css('display', 'flex');
                state = 1
            } else if (state) {
                $img.attr('src', './style/index/menu.svg') ;
                $menu.animate({width:'toggle'},500);;
                state = 0;
            }
            console.log('sm');
        } else if (window.screen.width > 550) {
            if(!state) {
                $img.attr('src', './style/index/close.svg') ;
                $menu.slideDown(500);
                $menu.css('display', 'flex');
                state = 1
            } else if (state) {
                $img.attr('src', './style/index/menu.svg') ;
                $menu.slideUp(500);
                state = 0;
            }
            console.log('md')
        }
    });

    let $imgs = $('.data');
    let indexImg = $imgs.length - 1;
    let index = 0;
    let $currentImg = $imgs.eq(index); 

    $imgs.css('display', 'none'); // on cache les images
    $currentImg.css('display', 'block'); // on affiche seulement l'image courante

    $('#next').on('click', () => {
        index++;
        if( index <= indexImg ){
            $imgs.css('display', 'none'); // on cache les images
            $currentImg = $imgs.eq(index); // on dÃ©finit la nouvelle image
            $currentImg.css('display', 'block'); // puis on l'affiche
        }
        else {
            index = 0;
            $imgs.css('display', 'none');
            $currentImg = $imgs.eq(index);
            $currentImg.css('display', 'block');
        }
    });

    $('#prev').on('click', () => {
        index--;
        if( index >= 0 ){
            $imgs.css('display', 'none');
            $currentImg = $imgs.eq(index);
            $currentImg.css('display', 'block');
        }
        else{
            index = 2;
            $imgs.css('display', 'none');
            $currentImg = $imgs.eq(index);
            $currentImg.css('display', 'block');
        }
    });


    let timer = () => {
         if ($('.sm').css('display') === 'flex') {
            setTimeout(() => {
                if(index < indexImg){
                    index++;
                } else {
                    index = 0
                }
    
                $imgs.css('display', 'none');
                $currentImg = $imgs.eq(index);
                $currentImg.css('display', 'block');
                console.log('next')
                timer();
                
            }, 5000)
         } else if ($('.sm').css('display') === 'none') {
            console.log('not here');
            return setTimeout(() => timer(), 7000);
         } 

    }

    timer();

})